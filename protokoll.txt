
>
Karli nägemus võrguprotokollist.

Lihtsuse huvideks võiks kasutada DataInputStream/DataOutputStream-i, siis ei pea ise leiutama andmepakettide mõõtude pärast.
Kõigepealt saadetakse int mis on käsu number ning vastavalt käsule alati kindel hulk datat kindlal kujul. Kui teine pool saab inti, siis teab mida edasi oodata. Kui tuleb midagi muud, siis võib vabalt õhku lennata.
Klient peaks kannatama asünkroonset suhtlust, st. saama hakkama kui server enne küsimusele vastamist ise midagi muud vahepeal küsib

(siia võiks mingi viisaka tabeli teha, hetkel pole ideed kuidas seda formaatida)

>  - klient saadab serverile
<  - server saadab kliendile

i: int   s: string  Käsu numbril loetavuse huvides i: eest ära jäetud

> 1  s: username s:parool   # uue kontro registreerimine
< 1  i: status s: errormessage # status: 1: OK  -1: ERR  errormessage: misjuhtus   
> 2  s: username s:parool   # sisselogimine
< 2  i: status s: errormessage  # sama mis <1
> 3    # get userlist
< 3 i: userid s: username   # lobby userlist ja/või logis lobbysse
< 4 i: userid s: username   # lobbyst logis välja
> 4                         # do logout
> 5 s: chatmessage          # kirjuta midagi lobby chatti
< 5 i: userid s:username s: chatmessage          # lobby chatti ütles keegi midagi    (kas useri info on oluline või võib message sees olla)? Esialgu las olla message sees: Näiteks user+"<< "+message...
> 6  # get current running games
< 6 i: gameid s: username1 s: username2
> 7 i: userid               # saadad userile userID kutse mängida
< 7 i: userid s: username   # userid/username saadab sulle kutse mängida. aksepteerimiseks saada kutse vastu (rida eespool)
< 8 i: userid i: gameid     # server ütleb, et teil algab mäng (kahepoolne kutse toimis)
> 9 i: userid               # klient keeldub kutsest
< 9: i: userid s: username  # teiselt poolt tuleb tagasi keeldumine 

< 100 i: tickid  # serveri "tiks", et klotsid langeks. ID, et neil vahet teha
< 101 i: tickid i: action: userid  # server saadab teise useri liigutuse ning selle liigutuse oleku. tickid: mis tiksu järel pidi see olemas
> 101 i: tickid i: action          # klient saadab välja oma liigutuse/klahvivajutuse ning oleku (nt: "UP true" või "LEFT false")
> 102                                # klient ütleb, et ta lahkus mängust
< 102                                # teine pool lahkus

...

< 105 i: kellelt s: username  s: chatmessage    # teine mängija ütles midagi
> 105 i: kellele s: chatmessage                 # mängija ütleb midagi

# 106 -> 7-8  (kuna need käsud on lobby sees tegelmiseks, siis võiks nummeratsioonis ka lobby asjade sees olla)






